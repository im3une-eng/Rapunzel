<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Our Journey ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Poppins',sans-serif;color:#fff;overflow:hidden;height:100vh;}
#bgVideo{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-3;}
.video-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);z-index:-2;}
#soundToggle{position:fixed;top:18px;right:18px;width:42px;height:42px;border-radius:50%;background:rgba(255,255,255,0.2);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;z-index:5;transition:transform .2s,background .3s;}
#soundToggle:hover{transform:scale(1.1);background:rgba(255,255,255,0.35);}
.star{position:absolute;width:2px;height:2px;background:white;opacity:0.8;animation:twinkle 3s infinite alternate;}
@keyframes twinkle{from{opacity:0.3;}to{opacity:1;}}
canvas{position:fixed;top:0;left:0;z-index:2;pointer-events:none;}
.container{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:420px;text-align:center;z-index:3;}
h1{font-size:2rem;margin-bottom:20px;text-shadow:0 0 15px #ff8acb;}
.timeline{background:rgba(255,255,255,0.12);backdrop-filter:blur(15px);border-radius:22px;padding:25px;min-height:220px;box-shadow:0 0 30px rgba(255,140,200,0.4);}
.typing {
  font-size: clamp(14px, 2.5vw, 18px); /* text grows/shrinks based on screen */
  line-height: 1.6;                     /* keeps spacing readable */
  white-space: pre-line;                /* preserves line breaks */
  border-right: 2px solid #ff8acb;     /* typing cursor effect */
  padding-right: 5px;
}
.next-btn{position:fixed;bottom:20px;right:20px;padding:14px 26px;font-size:1rem;font-weight:bold;border:none;border-radius:30px;background:linear-gradient(135deg,#ff5cab,#ff8acb);color:#fff;cursor:pointer;box-shadow:0 0 15px #ff5cab;z-index:4;animation:glow 2s infinite alternate;display:none;}
@keyframes glow{from{box-shadow:0 0 10px #ff5cab;}to{box-shadow:0 0 25px #ff8acb;}}
</style>
</head>
<body>

<video id="bgVideo" autoplay playsinline>
  <source src="vd2.mp4" type="video/mp4">
</video>
<div class="video-overlay"></div>

<div id="soundToggle">ğŸ”‡</div>

<script>
for(let i=0;i<120;i++){
  const s=document.createElement("div");
  s.className="star";
  s.style.left=Math.random()*100+"vw";
  s.style.top=Math.random()*100+"vh";
  s.style.animationDuration=2+Math.random()*3+"s";
  document.body.appendChild(s);
}
</script>

<canvas id="confettiCanvas"></canvas>

<div class="container">
  <h1>Our Journey ğŸ’–</h1>
  <div class="timeline">
    <div class="typing" id="typingText"></div>
  </div>
</div>

<button class="next-btn" id="nextBtn">Aage Chalein ğŸ’«</button>

<script>
// ---------------- Video & Sound ----------------
const video = document.getElementById("bgVideo");
const soundBtn = document.getElementById("soundToggle");
soundBtn.onclick = () => {
  video.muted = !video.muted;
  soundBtn.textContent = video.muted ? "ğŸ”‡" : "ğŸ”Š";
  video.play();
};

// ---------------- Typing ----------------
const journeyText = `
ğŸŒ¸ The day we met â€” just random, just simple.ğŸ˜‡

ğŸ’¬ Midnight talks that lasted until our eyes grew heavy,
filled with laughter, secrets, and the kind of teasing only we understand. ğŸ˜‹

ğŸ˜… Silly fights over the tiniest things,
that always ended with giggles, teasing, and your smile melting my heart.ğŸ’«

ğŸ’– Somewhere between all the moments, sarcasm, and late-night whispers,
you quietly became my favorite part of every day.ğŸ¥°

âœ¨ One year goneâ€¦ and countless more silly fights, cozy nights,
and magical moments still waiting for us. â¤ï¸
`;
const typingEl = document.getElementById("typingText");
let idx=0;
function typeJourney(){
  if(idx<journeyText.length){
    typingEl.innerHTML += journeyText.charAt(idx++);
    setTimeout(typeJourney,45);
  } else {
    document.getElementById("nextBtn").style.display="block";
  }
}
typeJourney();

// ---------------- Confetti ----------------
const canvas = document.getElementById("confettiCanvas");
const ctx = canvas.getContext("2d");
function resizeCanvas(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
resizeCanvas(); window.addEventListener("resize", resizeCanvas);

let confettiParticles=[];
function createConfetti(x,y,color){
  confettiParticles.push({x,y,vx:(Math.random()-0.5)*6,vy:-Math.random()*6,alpha:1,color,size:2+Math.random()*3});
}
function animateConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  confettiParticles.forEach((p,i)=>{
    p.x+=p.vx; p.y+=p.vy; p.vy+=0.2; p.alpha-=0.02;
    ctx.globalAlpha=p.alpha;
    ctx.fillStyle=p.color;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill();
    if(p.alpha<=0) confettiParticles.splice(i,1);
  });
  ctx.globalAlpha=1;
  requestAnimationFrame(animateConfetti);
}
animateConfetti();

// ---------------- Video logic ----------------
let firstPlayDone=false;
video.addEventListener('ended',()=>{
  if(!firstPlayDone){
    firstPlayDone=true;
    video.loop=true;
    video.play();
  }
});

// ---------------- Button click ----------------
const nextBtn = document.getElementById("nextBtn");
nextBtn.onclick = () => {
  const rect = nextBtn.getBoundingClientRect();
  const btnX = rect.left + rect.width/2;
  const btnY = rect.top + rect.height/2;

  if(!firstPlayDone){
    // Confetti while video plays first time
    const confettiInterval = setInterval(()=>{
      createConfetti(btnX,btnY,`hsl(${Math.random()*360},100%,70%)`);
    },50);

    // Stop confetti after video finishes first play
    video.onended = () => {
      clearInterval(confettiInterval);
      firstPlayDone = true;
    }
  } else {
    // After first play done â†’ redirect
    window.location.href="cake.html";
  }
};

// Unlock video play on mobile tap
document.addEventListener("click",()=>{video.play();},{once:true});
</script>

</body>
</html>
